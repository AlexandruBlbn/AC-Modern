<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>14.4.2 - Paginare È™i Segmentare</title>
    <link rel="stylesheet" href="../../css/style.css">
    <link rel="stylesheet" href="../../css/lesson.css">
</head>
<body>
    <article class="lesson-container">
        <header class="lesson-header">
            <span class="lesson-badge">LecÈ›ia 14.4.2</span>
            <h1 class="lesson-title">Paginare È™i Segmentare</h1>
            <p class="lesson-subtitle">Scheme de organizare a memoriei virtuale</p>
        </header>

        <section class="section" id="introducere">
            <h2 class="section-title">DouÄƒ AbordÄƒri</h2>
            <p class="text-content">
                ExistÄƒ douÄƒ scheme principale pentru implementarea memoriei virtuale: 
                <strong>paginarea</strong> È™i <strong>segmentarea</strong>. Sistemele moderne 
                folosesc predominant paginarea sau o combinaÈ›ie a celor douÄƒ.
            </p>
            <figure class="figure">
                <a href="../images/F77.png" target="_blank">
                    <img src="../images/F77.png" alt="Arbitrare prin lanÈ› de prioritÄƒÈ›i" class="figure-img medium">
                </a>
                <figcaption class="figure-caption">
                    <strong>Figura 7.7:</strong> Exemplu de arbitrare a cererilor multiple de Ã®ntrerupere prin lanÅ£ de prioritÄƒÅ£i.
                </figcaption>
            </figure>
        </section>

        <section class="section" id="paginare">
            <h2 class="section-title">Paginare (Paging)</h2>
            
            <div class="definition-box">
                <p class="definition-label">DefiniÈ›ie</p>
                <p class="definition-text">
                    <strong>Paginarea</strong> Ã®mparte atÃ¢t spaÈ›iul de adrese virtual cÃ¢t È™i 
                    memoria fizicÄƒ Ã®n blocuri de dimensiune fixÄƒ (pagini È™i frame-uri). 
                    Orice paginÄƒ poate fi mapatÄƒ la orice frame disponibil.
                </p>
            </div>

            <h3>Traducerea Adresei</h3>
            <div class="code-block">
<pre>AdresÄƒ VirtualÄƒ (exemplu 32 biÈ›i, pagini 4 KB):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Page Number (20 biÈ›i)â”‚ Offset (12 biÈ›i)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                      â”‚
          â–¼                      â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
    â”‚ Page Table  â”‚              â”‚
    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚              â”‚
    â”‚ â”‚ PTE 0   â”‚ â”‚              â”‚
    â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚              â”‚
    â”‚ â”‚ PTE 1   â”‚ â”‚              â”‚
    â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚              â”‚
    â”‚ â”‚  ...    â”‚ â”‚              â”‚
    â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚              â”‚
    â”‚ â”‚ PTE N   â”‚â—„â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚              
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜              
           â”‚                     
           â–¼                     
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frame Number (20 biÈ›i)â”‚ Offset (12 biÈ›i)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         AdresÄƒ FizicÄƒ</pre>
            </div>

            <h3>Structura Page Table Entry (PTE)</h3>
            <table class="data-table">
                <thead>
                    <tr>
                        <th>CÃ¢mp</th>
                        <th>BiÈ›i</th>
                        <th>Descriere</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td>Frame Number</td><td>20+</td><td>NumÄƒrul frame-ului fizic</td></tr>
                    <tr><td>Valid/Present</td><td>1</td><td>1 = pagina e Ã®n RAM</td></tr>
                    <tr><td>Read/Write</td><td>1</td><td>Permisiune de scriere</td></tr>
                    <tr><td>User/Supervisor</td><td>1</td><td>Accesibil din user mode</td></tr>
                    <tr><td>Accessed</td><td>1</td><td>Pagina a fost cititÄƒ</td></tr>
                    <tr><td>Dirty</td><td>1</td><td>Pagina a fost modificatÄƒ</td></tr>
                    <tr><td>NX (No Execute)</td><td>1</td><td>ExecuÈ›ie interzisÄƒ</td></tr>
                </tbody>
            </table>

            <div class="info-box info-blue">
                <p class="info-title">ğŸ’¡ Avantajele PaginÄƒrii</p>
                <ul class="content-list">
                    <li>FÄƒrÄƒ fragmentare externÄƒ (toate blocurile au aceeaÈ™i dimensiune)</li>
                    <li>Alocare simplÄƒ È™i eficientÄƒ</li>
                    <li>Mapare flexibilÄƒ (orice paginÄƒ â†’ orice frame)</li>
                    <li>Partajare uÈ™oarÄƒ (acelaÈ™i frame Ã®n mai multe page tables)</li>
                </ul>
            </div>
        </section>

        <section class="section" id="multi-nivel">
            <h2 class="section-title">Page Table Multi-Nivel</h2>
            
            <p class="text-content">
                O problemÄƒ cu paginarea simplÄƒ: pentru adrese de 64 biÈ›i È™i pagini de 4 KB, 
                ar fi necesare 2^52 intrÄƒri = <strong>36 Petabytes</strong> pentru page table! 
                SoluÈ›ia: page tables pe mai multe niveluri.
            </p>

            <div class="code-block">
<pre>x86-64: Page Table pe 4 niveluri (48 biÈ›i virtuali efectivi)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PML4    â”‚ PDPT    â”‚ PD      â”‚ PT      â”‚ Offset   â”‚
â”‚ (9 biÈ›i)â”‚ (9 biÈ›i)â”‚ (9 biÈ›i)â”‚ (9 biÈ›i)â”‚ (12 biÈ›i)â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚         â”‚         â”‚         â”‚         â”‚
     â–¼         â–¼         â–¼         â–¼         â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”
  â”‚PML4  â”‚â†’â”‚PDPT  â”‚â†’â”‚ PD   â”‚â†’â”‚ PT   â”‚â†’   â”‚Frame â”‚
  â”‚Table â”‚ â”‚Table â”‚ â”‚Table â”‚ â”‚Table â”‚    â”‚      â”‚
  â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”˜

Fiecare nivel are 512 intrÄƒri (2^9)</pre>
            </div>

            <div class="info-box">
                <p class="info-title">ğŸ“Š Beneficiul Multi-Nivel</p>
                <p>
                    Tabelele nefolosite nu trebuie alocate. Un proces tipic foloseÈ™te doar 
                    o fracÈ›iune micÄƒ din spaÈ›iul de adrese, deci majoritatea tabelelor 
                    intermediare nu existÄƒ.
                </p>
            </div>
        </section>

        <section class="section" id="segmentare">
            <h2 class="section-title">Segmentare (Segmentation)</h2>
            
            <div class="definition-box">
                <p class="definition-label">DefiniÈ›ie</p>
                <p class="definition-text">
                    <strong>Segmentarea</strong> Ã®mparte spaÈ›iul de adrese Ã®n segmente de 
                    dimensiuni variabile, fiecare reprezentÃ¢nd o unitate logicÄƒ (cod, date, 
                    stivÄƒ). Segmentele pot creÈ™te sau micÈ™ora dinamic.
                </p>
            </div>

            <div class="code-block">
<pre>AdresÄƒ SegmentatÄƒ:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Segment Selectorâ”‚    Offset Ã®n Segment   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                     â”‚
         â–¼                     â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
   â”‚ Segment   â”‚               â”‚
   â”‚ Table     â”‚               â”‚
   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”‚               â”‚
   â”‚ â”‚Base   â”‚ â”‚ + Offset â”€â”€â”€â”€â”€â”˜
   â”‚ â”‚Limit  â”‚ â”‚     â”‚
   â”‚ â”‚Perms  â”‚ â”‚     â”‚
   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚     â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
         â”‚           â”‚
         â–¼           â–¼
      AdresÄƒ FizicÄƒ = Base + Offset (dacÄƒ Offset < Limit)</pre>
            </div>

            <h3>ComparaÈ›ie Paginare vs Segmentare</h3>
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Aspect</th>
                        <th>Paginare</th>
                        <th>Segmentare</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td>Dimensiune bloc</td><td>FixÄƒ</td><td>VariabilÄƒ</td></tr>
                    <tr><td>Fragmentare externÄƒ</td><td>Nu</td><td>Da</td></tr>
                    <tr><td>Fragmentare internÄƒ</td><td>Da (ultima paginÄƒ)</td><td>Nu</td></tr>
                    <tr><td>Vizibilitate</td><td>TransparentÄƒ</td><td>VizibilÄƒ programatorului</td></tr>
                    <tr><td>Unitate logicÄƒ</td><td>Nu</td><td>Da (cod, date, stivÄƒ)</td></tr>
                    <tr><td>Complexitate</td><td>SimplÄƒ</td><td>ComplexÄƒ</td></tr>
                </tbody>
            </table>
        </section>

        <section class="section" id="combinat">
            <h2 class="section-title">Segmentare cu Paginare</h2>
            
            <p class="text-content">
                Unele sisteme (x86 clasic) combinÄƒ cele douÄƒ tehnici: segmentele sunt Ã®mpÄƒrÈ›ite 
                Ã®n pagini. x86-64 a simplificat acest model, folosind predominant paginare.
            </p>

            <div class="card-grid">
                <div class="info-card">
                    <div class="card-icon">ğŸ“¦</div>
                    <h3 class="card-title">x86 (32 biÈ›i)</h3>
                    <p class="card-text">
                        Segmentare + Paginare<br>
                        Segment â†’ AdresÄƒ LiniarÄƒ â†’ PaginÄƒ â†’ FizicÄƒ<br>
                        Complex, rar folosit complet
                    </p>
                </div>
                <div class="info-card">
                    <div class="card-icon">ğŸš€</div>
                    <h3 class="card-title">x86-64</h3>
                    <p class="card-text">
                        Paginare pe 4 niveluri<br>
                        Segmentare minimalÄƒ (flat model)<br>
                        48 biÈ›i virtuali, 52 biÈ›i fizici
                    </p>
                </div>
            </div>
        </section>

        <section class="section" id="huge-pages">
            <h2 class="section-title">Huge Pages</h2>
            
            <p class="text-content">
                Pentru aplicaÈ›ii cu working sets mari, paginile standard de 4 KB pot fi ineficiente 
                (multe intrÄƒri Ã®n page table, multe TLB miss-uri). <strong>Huge pages</strong> 
                oferÄƒ o soluÈ›ie:
            </p>

            <table class="data-table">
                <tr><td><strong>Standard Page</strong></td><td>4 KB</td></tr>
                <tr><td><strong>Large Page (x86-64)</strong></td><td>2 MB</td></tr>
                <tr><td><strong>Huge Page (x86-64)</strong></td><td>1 GB</td></tr>
            </table>

            <div class="info-box info-blue">
                <p class="info-title">ğŸ’¡ Beneficii Huge Pages</p>
                <ul class="content-list">
                    <li>Mai puÈ›ine intrÄƒri Ã®n page table</li>
                    <li>Mai puÈ›ine TLB miss-uri (acoperire mai mare per intrare TLB)</li>
                    <li>Page walks mai scurte (mai puÈ›ine niveluri)</li>
                    <li>Utile pentru: baze de date, maÈ™ini virtuale, HPC</li>
                </ul>
            </div>
        </section>

        <section class="section" id="sumar">
            <h2 class="section-title">Rezumat</h2>
            <div class="info-box info-green">
                <p class="info-title">ğŸ“ Puncte Cheie</p>
                <ul class="content-list">
                    <li><strong>Paginare:</strong> Blocuri fixe, fÄƒrÄƒ fragmentare externÄƒ, dominant azi</li>
                    <li><strong>Segmentare:</strong> Blocuri variabile, unitÄƒÈ›i logice, mai puÈ›in folositÄƒ</li>
                    <li>Page tables multi-nivel reduc memoria necesarÄƒ</li>
                    <li>x86-64 foloseÈ™te paginare pe 4 niveluri</li>
                    <li>Huge pages Ã®mbunÄƒtÄƒÈ›esc performanÈ›a pentru working sets mari</li>
                </ul>
            </div>
        </section>
    </article>

    <script>
        document.querySelectorAll('.accordion-header').forEach(header => {
            header.addEventListener('click', () => {
                const content = header.nextElementSibling;
                const isExpanded = content.classList.contains('expanded');
                header.classList.toggle('active', !isExpanded);
                content.classList.toggle('expanded', !isExpanded);
            });
        });
    </script>
    <script src="../../js/lesson.js"></script>
</body>
</html>
