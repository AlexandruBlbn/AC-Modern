<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>14.2.1 - Structura Cache-ului</title>
    <link rel="stylesheet" href="../../css/style.css">
    <link rel="stylesheet" href="../../css/lesson.css">
</head>
<body>
    <article class="lesson-container">
        <header class="lesson-header">
            <span class="lesson-badge">LecÈ›ia 14.2.1</span>
            <h1 class="lesson-title">Structura Cache-ului</h1>
            <p class="lesson-subtitle">Componentele È™i organizarea internÄƒ a memoriei cache</p>
        </header>

        <section class="section" id="introducere">
            <h2 class="section-title">Ce este Memoria Cache?</h2>
            <p class="text-content">
                <strong>Memoria cache</strong> este o memorie rapidÄƒ È™i de mici dimensiuni situatÄƒ 
                Ã®ntre procesor È™i memoria principalÄƒ. Rolul sÄƒu este de a pÄƒstra copii ale datelor 
                frecvent accesate, reducÃ¢nd astfel timpul mediu de acces la memorie.
            </p>

            <div class="definition-box">
                <p class="definition-label">DefiniÈ›ie</p>
                <p class="definition-text">
                    Cache-ul este o memorie SRAM (Static RAM) transparentÄƒ pentru software, care 
                    stocheazÄƒ temporar date È™i instrucÈ›iuni preluate din memoria principalÄƒ, 
                    anticipÃ¢nd cÄƒ acestea vor fi solicitate din nou Ã®n viitorul apropiat.
                </p>
            </div>
            <figure class="figure">
                <a href="../images/F72.png" target="_blank">
                    <img src="../images/F72.png" alt="Organizare ierarhicÄƒ a magistralelor" class="figure-img medium">
                </a>
                <figcaption class="figure-caption">
                    <strong>Figura 7.2:</strong> Exemplu de organizare ierarhicÄƒ a magistralelor calculatorului.
                </figcaption>
            </figure>

            <p class="text-content">
                Denumirea "cache" vine din francezÄƒ È™i Ã®nseamnÄƒ "ascunzÄƒtoare" sau "loc de stocare". 
                AceastÄƒ memorie este "ascunsÄƒ" programatorului - funcÈ›ioneazÄƒ automat fÄƒrÄƒ intervenÈ›ia 
                explicitÄƒ a software-ului.
            </p>
        </section>

        <section class="section" id="componente">
            <h2 class="section-title">Componentele Cache-ului</h2>
            
            <p class="text-content">
                O memorie cache este organizatÄƒ Ã®n <strong>linii de cache</strong> (cache lines), 
                fiecare linie conÈ›inÃ¢nd mai multe componente esenÈ›iale:
            </p>

            <div class="card-grid">
                <div class="info-card">
                    <div class="card-icon">ğŸ·ï¸</div>
                    <h3 class="card-title">Tag (EtichetÄƒ)</h3>
                    <p class="card-text">
                        IdentificÄƒ unic adresa din memoria principalÄƒ din care provin datele. 
                        Este folosit pentru a verifica dacÄƒ datele cÄƒutate sunt Ã®n cache.
                    </p>
                </div>
                <div class="info-card">
                    <div class="card-icon">ğŸ“Š</div>
                    <h3 class="card-title">Bloc de Date</h3>
                    <p class="card-text">
                        ConÈ›ine datele efective copiate din memorie. Dimensiunea tipicÄƒ 
                        este de 32-128 bytes, conÈ›inÃ¢nd mai multe cuvinte.
                    </p>
                </div>
                <div class="info-card">
                    <div class="card-icon">âœ“</div>
                    <h3 class="card-title">Bit Valid</h3>
                    <p class="card-text">
                        IndicÄƒ dacÄƒ linia de cache conÈ›ine date valide. La pornire, 
                        toate bitii valid sunt 0 (cache gol).
                    </p>
                </div>
                <div class="info-card">
                    <div class="card-icon">âœï¸</div>
                    <h3 class="card-title">Bit Dirty (Modificat)</h3>
                    <p class="card-text">
                        IndicÄƒ dacÄƒ datele au fost modificate È™i diferÄƒ de copia din 
                        memoria principalÄƒ (folosit Ã®n write-back).
                    </p>
                </div>
            </div>
            <figure class="figure">
                <a href="../images/F73.png" target="_blank">
                    <img src="../images/F73.png" alt="Organizare ierarhicÄƒ cu magistralÄƒ mezanin" class="figure-img medium">
                </a>
                <figcaption class="figure-caption">
                    <strong>Figura 7.3:</strong> Exemplu de organizare ierarhicÄƒ a magistralelor la care se introduce magistrala de mare vitezÄƒ â€œde la mezaninâ€.
                </figcaption>
            </figure>
        </section>

        <section class="section" id="linie-cache">
            <h2 class="section-title">Structura unei Linii de Cache</h2>
            
            <div class="info-box info-blue">
                <p class="info-title">ğŸ“ Exemplu: Linie de Cache de 64 bytes</p>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Valid (1 bit)</th>
                            <th>Dirty (1 bit)</th>
                            <th>Tag (20-30 biÈ›i)</th>
                            <th>Date (64 bytes = 512 biÈ›i)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1</td>
                            <td>0</td>
                            <td>0x3A5F2</td>
                            <td>[date copiate din memorie]</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <p class="text-content">
                CÃ¢nd procesorul solicitÄƒ o adresÄƒ, aceasta este Ã®mpÄƒrÈ›itÄƒ Ã®n trei pÄƒrÈ›i:
            </p>

            <div class="code-block">
<pre>Adresa de memorie (32 biÈ›i exemplu):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   TAG (20 biÈ›i) â”‚ INDEX (6 biÈ›i)â”‚ OFFSET (6 b)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“                  â†“              â†“
   IdentificÄƒ         SelecteazÄƒ      SelecteazÄƒ
   blocul din         linia Ã®n        byte-ul Ã®n
   memorie            cache           linia cache</pre>
            </div>

            <ul class="content-list">
                <li><strong>Tag:</strong> IdentificÄƒ sursa datelor (partea superioarÄƒ a adresei)</li>
                <li><strong>Index:</strong> SelecteazÄƒ setul sau linia Ã®n cache</li>
                <li><strong>Offset:</strong> SelecteazÄƒ byte-ul specific din linia de cache</li>
            </ul>
        </section>

        <section class="section" id="dimensiuni">
            <h2 class="section-title">Parametri de Proiectare</h2>
            
            <p class="text-content">
                PerformanÈ›a unui cache depinde de mai mulÈ›i parametri de proiectare:
            </p>

            <div class="accordion">
                <div class="accordion-item">
                    <button class="accordion-header">
                        <span>ğŸ“ Dimensiunea TotalÄƒ</span>
                        <span class="icon-plus">+</span>
                    </button>
                    <div class="accordion-content">
                        <div class="accordion-body">
                            <p>
                                Capacitatea totalÄƒ a cache-ului (ex: 32 KB, 256 KB, 8 MB). 
                                Cache-uri mai mari au rate de hit mai bune, dar sunt mai lente 
                                È™i consumÄƒ mai multÄƒ energie. ExistÄƒ un punct de diminishing returns.
                            </p>
                            <p><strong>Tipic:</strong> L1: 32-64 KB, L2: 256 KB-1 MB, L3: 4-64 MB</p>
                        </div>
                    </div>
                </div>

                <div class="accordion-item">
                    <button class="accordion-header">
                        <span>ğŸ“¦ Dimensiunea Liniei (Block Size)</span>
                        <span class="icon-plus">+</span>
                    </button>
                    <div class="accordion-content">
                        <div class="accordion-body">
                            <p>
                                Cantitatea de date transferate Ã®ntre cache È™i memorie la un acces. 
                                Linii mai mari exploateazÄƒ mai bine localitatea spaÈ›ialÄƒ, dar 
                                pot introduce date inutile È™i cresc penalizarea la miss.
                            </p>
                            <p><strong>Tipic:</strong> 32-128 bytes (cel mai comun: 64 bytes)</p>
                        </div>
                    </div>
                </div>

                <div class="accordion-item">
                    <button class="accordion-header">
                        <span>ğŸ”¢ Asociativitatea</span>
                        <span class="icon-plus">+</span>
                    </button>
                    <div class="accordion-content">
                        <div class="accordion-body">
                            <p>
                                NumÄƒrul de locaÈ›ii Ã®n care un bloc poate fi plasat. 
                                DeterminÄƒ flexibilitatea È™i complexitatea cache-ului.
                            </p>
                            <ul>
                                <li><strong>Mapare directÄƒ:</strong> 1 locaÈ›ie posibilÄƒ</li>
                                <li><strong>Set-asociativ:</strong> N locaÈ›ii (2, 4, 8, 16-way)</li>
                                <li><strong>Complet asociativ:</strong> Orice locaÈ›ie</li>
                            </ul>
                            <p><strong>Tipic:</strong> L1: 4-8 way, L2: 8-16 way, L3: 16-20 way</p>
                        </div>
                    </div>
                </div>

                <div class="accordion-item">
                    <button class="accordion-header">
                        <span>âœï¸ Politica de Scriere</span>
                        <span class="icon-plus">+</span>
                    </button>
                    <div class="accordion-content">
                        <div class="accordion-body">
                            <p>DeterminÄƒ cum sunt gestionate scrierile:</p>
                            <ul>
                                <li><strong>Write-through:</strong> Scrie simultan Ã®n cache È™i memorie</li>
                                <li><strong>Write-back:</strong> Scrie doar Ã®n cache, actualizeazÄƒ memoria la evacuare</li>
                            </ul>
                            <p><strong>La miss de scriere:</strong></p>
                            <ul>
                                <li><strong>Write-allocate:</strong> Aduce blocul Ã®n cache, apoi scrie</li>
                                <li><strong>No-write-allocate:</strong> Scrie direct Ã®n memorie</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="section" id="functionare">
            <h2 class="section-title">FuncÈ›ionarea de BazÄƒ</h2>
            
            <p class="text-content">
                CÃ¢nd procesorul acceseazÄƒ memoria, cache-ul executÄƒ urmÄƒtorii paÈ™i:
            </p>

            <ol class="content-list numbered">
                <li>Extrage <strong>indexul</strong> din adresÄƒ pentru a localiza setul</li>
                <li>ComparÄƒ <strong>tag-ul</strong> adresei cu tag-urile liniilor din set</li>
                <li>VerificÄƒ bitul <strong>valid</strong> al liniei cu tag potrivit</li>
                <li>DacÄƒ match (hit): returneazÄƒ datele folosind offset-ul</li>
                <li>DacÄƒ nu (miss): aduce blocul din nivelul inferior È™i Ã®l stocheazÄƒ</li>
            </ol>

            <div class="card-grid">
                <div class="info-card">
                    <div class="card-icon">âœ…</div>
                    <h3 class="card-title">Cache Hit</h3>
                    <p class="card-text">
                        Datele sunt gÄƒsite Ã®n cache. Accesul este rapid 
                        (1-4 cicluri pentru L1). Aceasta este situaÈ›ia doritÄƒ.
                    </p>
                </div>
                <div class="info-card">
                    <div class="card-icon">âŒ</div>
                    <h3 class="card-title">Cache Miss</h3>
                    <p class="card-text">
                        Datele nu sunt Ã®n cache. Trebuie aduse din nivelul 
                        inferior (L2, L3 sau RAM), ceea ce dureazÄƒ mult mai mult.
                    </p>
                </div>
            </div>
        </section>

        <section class="section" id="sumar">
            <h2 class="section-title">Rezumat</h2>
            <div class="info-box info-green">
                <p class="info-title">ğŸ“ Puncte Cheie</p>
                <ul class="content-list">
                    <li>Cache-ul conÈ›ine linii cu: tag, date, bit valid, bit dirty</li>
                    <li>Adresa este Ã®mpÄƒrÈ›itÄƒ Ã®n: tag, index, offset</li>
                    <li>Parametri de proiectare: dimensiune, mÄƒrime linie, asociativitate, politicÄƒ scriere</li>
                    <li>Cache hit = date gÄƒsite, Cache miss = date lipsÄƒ</li>
                    <li>Cache-ul funcÈ›ioneazÄƒ transparent pentru software</li>
                </ul>
            </div>
        </section>
    </article>

    <script>
        document.querySelectorAll('.accordion-header').forEach(header => {
            header.addEventListener('click', () => {
                const content = header.nextElementSibling;
                const isExpanded = content.classList.contains('expanded');
                header.classList.toggle('active', !isExpanded);
                content.classList.toggle('expanded', !isExpanded);
            });
        });
    </script>
    <script src="../../js/lesson.js"></script>
</body>
</html>
